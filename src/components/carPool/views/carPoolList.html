<div class="car-pool-list">
  <md-subheader class="md-no-sticky">{{vm.journeys.length}} Viajes en total <span class="reference" ng-click="vm.showReferences()">Referencias</span></md-subheader>
  <md-list-item class="md-3-line" ng-repeat="item in vm.journeys" ng-class="{
    'out-coming': item.from_to === 'TO'
  }">
    <md-icon
      aria-hidden="true"
      class="fa fa-car fa-2x">
        <md-icon
      aria-hidden="true"
      class="fa fa-2x" ng-class="{
        'fa-arrow-right': item.from_to === 'TO',
        'fa-arrow-left': item.from_to === 'FROM',
      }"></md-icon>
    </md-icon>
    <div class="md-list-item-text" layout="column">
      <h3><b>{{ ::item.driver.username }}</b> <i class="fa fa-clock-o" aria-hidden="true" ng-show="item.flexible_time"></i></h3>
      <h4>{{ ::item.car_identification }}</h4>
      <h4>{{ ::item.description }}</h4>
      <h4>Quedan {{ item.free_seats }} lugares</h4>
      <p>{{ ::item.when }}</p>
    </div>
    <md-button class="md-fab md-mini md-warn" aria-label="Bajarse" aria-hidden="true" ng-if="item.added && !item.admin" ng-click="vm.removeToTrip(item)" ng-disabled="item.departure">
        <md-icon aria-hidden="true" class="fa fa-minus" ></md-icon>
    </md-button>
    <md-button class="md-fab md-mini md-primary" aria-label="Sumarse" aria-hidden="true" ng-if="!item.added && !item.admin" ng-click="vm.addToTrip(item)" ng-disabled="item.free_seats == 0 || item.departure">
        <md-icon aria-hidden="true" class="fa fa-plus"></md-icon>
    </md-button>
    <md-button class="md-fab md-mini md-primary edit" aria-label="Editar" aria-hidden="true" ng-if="item.admin" ng-click="vm.editTrip(item)" ng-disabled="item.departure">
        <md-icon aria-hidden="true" class="fa fa-pencil"></md-icon>
    </md-button>

  </md-list-item>
</div>
<script type="text/ng-template" id="/references.html">
  <md-dialog aria-label="Referencias">
    <form ng-cloak class="reference-dialog">
      <md-dialog-content>
        <div class="md-dialog-content">
          <h2>Referencias</h2>
          <ul>
            <li>
              <md-icon aria-hidden="true" class="fa fa-minus" style="color: rgb(255,87,34)"></md-icon> <span>Bajarse de un viaje</span>
            </li>
            <li>
              <md-icon aria-hidden="true" class="fa fa-plus" style="color: rgb(63,81,181)" ></md-icon> <span>Agregarse a un viaje</span>
            </li>
            <li>
              <md-icon aria-hidden="true" class="fa fa-arrow-right" style="color:red" ></md-icon> <span>Regresa a Abril</span>
            </li>
            <li>
              <md-icon aria-hidden="true" class="fa fa-arrow-left" style="color:green"></md-icon> <span>Sale desde Abril</span>
            </li>
            <li>
              <md-icon class="fa fa-clock-o" aria-hidden="true"></md-icon> <span>15' de tolerancia</span>
            </li>

          </ul>
        </div>
      </md-dialog-content>
      <md-dialog-actions layout="row">
        <md-button ng-click="closeReferences()">
          Cerrar
        </md-button>
      </md-dialog-actions>
    </form>
  </md-dialog>
</script>